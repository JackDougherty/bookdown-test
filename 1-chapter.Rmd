# Chapter 1 interactive media tests

## Question {-}
How to embed video stream from CT Digital Archives into Bookdown, WITHOUT autoplay, regardless of whether the user's browser is set to block autoplay?

**BEFORE TESTING**: Make sure that your browser settings do NOT block autoplay content by default, since we cannot ensure that users will have same browser settings as developers.

## Background {-}
Here is an oral history video as displayed on the CTDA site, which does NOT autoplay:

https://collections.ctdigitalarchive.org/islandora/object/120002:172

Here is the CTDA MP4 video stream for that object, which runs AUTOPLAY in Chrome and FFox for Mac (and perhaps other browsers). CTDA says there is no setting to turn off autoplay from datastreams

https://collections.ctdigitalarchive.org/islandora/object/120002:172/datastream/MP4

The stream above also works with this "view" ending:

https://collections.ctdigitalarchive.org/islandora/object/120002:172/datastream/MP4/view

## Trying iframe solution {-}
Here is Bookdown code-chunk that displays CTDA video in web edition, static image in PDF edition, BUT CANNOT TURN OFF AUTOPLAY using the iframe method, even if I add "?autoplay=0" or "?autoplay=false" to the end of the src string, as suggested in Stackoverflow below.

(ref:ctda-sample-video) Here's a sample CTDA video caption, with option to add Markdown link and footnote.

```{r ctda-sample-video, echo=FALSE, fig.cap="(ref:ctda-sample-video)"}
if(knitr::is_html_output()) knitr::include_url("https://collections.ctdigitalarchive.org/islandora/object/120002:172/datastream/MP4?autoplay=false") else knitr::include_graphics("images/2014-lumpkin-mae-willie-screenshot.png")
```

## Trying HTML5 video tag solution {-}
Here's a solution using the [HTML5 video tag](https://www.w3schools.com/tags/tag_video.asp), which simply says NOT to insert "autoplay".

<video width="640" height="360" controls>
    <source src="https://collections.ctdigitalarchive.org/islandora/object/120002:191/datastream/MP4" type="video/mp4">
</video>

BUT the HMTL5 video tag solution this is not ideal because:

-  Bookdown/knitr does not *appear* to support the HMTL 5 video tag in the same way as it supports knitr::include_url.
- This means that I cannot use Bookdown built-in support for figures using the HMTL5 video tag, such as:
  - the if-else statement in the R code-chunk that places the interactive iframe in HTML and the static floating image in the PDF, but the same caption for both
  - figure auto-numbering, such as Figure 1.2, 1.3, etc.

## More resources {-}
See Stackoverflow discussions about HTML iframe, HTML5 video, and autoplay:

https://stackoverflow.com/questions/49256942/how-to-disable-autoplay-video-in-iframe
and
https://stackoverflow.com/questions/31956221/how-to-disable-auto-play-for-local-video-in-iframe

See Google Chrome Developer autoplay policy change in April 2018:

https://developers.google.com/web/updates/2017/09/autoplay-policy-changes

See Firefox Developer note for Video HTML5 autoplay:

https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video
